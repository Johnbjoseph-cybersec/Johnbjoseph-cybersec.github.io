<!DOCTYPE html>
<html lang="en">
  <head>
    <title>GRC Practice Lab – John B Joseph</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Reuse your existing fonts & styles -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/aos.css">
    <link rel="stylesheet" href="css/ionicons.min.css">
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">

    <style>
      /* Simple lab-specific tweaks – we can expand later */
      .grc-lab-hero {
        padding-top: 140px;
        padding-bottom: 40px;
      }
      .grc-tab-buttons .btn {
        margin-right: 8px;
        margin-bottom: 8px;
      }
      .grc-tab {
        display: none;
      }
      .grc-tab.active {
        display: block;
      }
    </style>
  </head>

  <body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">

    <!-- Same navbar as index.html, but link back to home & highlight Lab -->
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar ftco-navbar-light site-navbar-target" id="ftco-navbar">
      <div class="container">
        <a class="navbar-brand" href="index.html">John B Joseph</a>
        <button class="navbar-toggler js-fh5co-nav-toggle fh5co-nav-toggle" type="button"
                data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav"
                aria-expanded="false" aria-label="Toggle navigation">
          <span class="oi oi-menu"></span> Menu
        </button>

        <div class="collapse navbar-collapse" id="ftco-nav">
          <ul class="navbar-nav nav ml-auto">
            <li class="nav-item"><a href="index.html#home-section" class="nav-link"><span>Home</span></a></li>
            <li class="nav-item"><a href="toolkit.html" class="nav-link"><span>Toolkit</span></a></li>
            <li class="nav-item active"><a href="grc-lab.html" class="nav-link"><span>GRC Practice Lab</span></a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Hero / Intro -->
    <section class="ftco-section grc-lab-hero">
      <div class="container">
        <div class="row justify-content-center mb-4">
          <div class="col-md-10 text-center ftco-animate">
            <h1 class="mb-3">GRC Practice Lab (Beta)</h1>
            <p class="lead">
              A free, browser-based sandbox to practice real GRC work – assets, risks, controls, and findings –
              built by John B Joseph. Data stays in your browser only.
            </p>
            <p class="mb-0"><small>
              Controls are paraphrased and inspired by ISO 27001, NIST CSF, HIPAA, and PCI DSS for educational use.
              Always refer to the official standards for authoritative text.
            </small></p>
          </div>
        </div>

        <!-- Tab buttons -->
        <div class="row mb-4">
          <div class="col-md-12 text-center grc-tab-buttons">
            <button class="btn btn-primary btn-sm" data-grc-tab="frameworks">Frameworks & Controls</button>
            <button class="btn btn-outline-light btn-sm" data-grc-tab="assets">Assets</button>
            <button class="btn btn-outline-light btn-sm" data-grc-tab="risks">Risks</button>
            <!-- later: Controls, Issues, Dashboard -->
          </div>
        </div>

        <!-- Tab: Frameworks -->
       <div id="tab-frameworks" class="grc-tab active ftco-animate">
  <h3>Framework Library</h3>
  <p class="mb-3">
    A unified, paraphrased control set inspired by ISO 27001, NIST CSF, PCI DSS & HIPAA.
    Use the filters to explore how controls align across frameworks.
  </p>

  <!-- Filters -->
  <div class="row mb-3">
    <div class="col-md-4 mb-2">
      <label class="text-muted small mb-1">Filter by Framework</label>
      <select id="framework-filter" class="form-control form-control-sm">
        <option value="all">All frameworks</option>
        <option value="ISO 27001">ISO 27001</option>
        <option value="NIST CSF">NIST CSF</option>
        <option value="PCI DSS">PCI DSS</option>
        <option value="HIPAA">HIPAA</option>
      </select>
    </div>
    <div class="col-md-4 mb-2">
      <label class="text-muted small mb-1">Filter by Category</label>
      <select id="category-filter" class="form-control form-control-sm">
        <option value="all">All categories</option>
        <option value="Access Control">Access Control</option>
        <option value="Identity & Authentication">Identity & Authentication</option>
        <option value="Logging & Monitoring">Logging & Monitoring</option>
        <option value="Encryption & Key Management">Encryption & Key Management</option>
        <option value="Backup & Recovery">Backup & Recovery</option>
        <option value="Change Management">Change Management</option>
        <option value="Vulnerability Management">Vulnerability Management</option>
        <option value="Incident Response">Incident Response</option>
        <option value="Vendor Risk">Vendor Risk</option>
        <option value="Policy & Governance">Policy & Governance</option>
        <option value="Awareness & Training">Awareness & Training</option>
      </select>
    </div>
    <div class="col-md-4 mb-2">
      <label class="text-muted small mb-1">Search</label>
      <input id="framework-search" type="text" class="form-control form-control-sm"
             placeholder="Search by name or description...">
    </div>
  </div>

  <!-- Table -->
  <div class="table-responsive bg-dark p-3 rounded">
    <table class="table table-dark table-striped table-hover table-sm mb-0">
      <thead>
        <tr>
          <th style="width: 10%;">ID</th>
          <th style="width: 20%;">Name</th>
          <th style="width: 18%;">Category</th>
          <th style="width: 20%;">Based On</th>
          <th style="width: 32%;">Description</th>
        </tr>
      </thead>
      <tbody id="frameworks-table-body">
        <!-- rows will be injected by JS -->
      </tbody>
    </table>
    <div class="mt-2 text-right">
      <small id="frameworks-count" class="text-muted"></small>
    </div>
  </div>
</div>

        <!-- Tab: Assets -->
        <div id="tab-assets" class="grc-tab ftco-animate">
  <h3>Asset Inventory</h3>
  <p class="mb-3">
    Capture the key systems, data stores, vendors, and services that need protection. These assets
    will later be linked to risks, controls, and findings.
  </p>

  <div class="row">
    <!-- Form column -->
    <div class="col-md-5 mb-4">
      <div class="bg-dark p-3 rounded">
        <h5 class="mb-3">Add / Edit Asset</h5>
        <form id="asset-form">
          <input type="hidden" id="asset-id">

          <div class="form-group">
            <label for="asset-name" class="text-muted small mb-1">Asset name *</label>
            <input type="text" id="asset-name" class="form-control form-control-sm"
                   placeholder="e.g. MediCloud Web App" required>
          </div>

          <div class="form-group">
            <label for="asset-type" class="text-muted small mb-1">Type *</label>
            <select id="asset-type" class="form-control form-control-sm" required>
              <option value="">Select type...</option>
              <option value="Application">Application</option>
              <option value="Database">Database</option>
              <option value="Server / Host">Server / Host</option>
              <option value="Network / Security Device">Network / Security Device</option>
              <option value="Cloud Service">Cloud Service</option>
              <option value="Vendor / Third Party">Vendor / Third Party</option>
              <option value="Data Store">Data Store</option>
              <option value="People / Role">People / Role</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label for="asset-criticality" class="text-muted small mb-1">Business criticality *</label>
            <select id="asset-criticality" class="form-control form-control-sm" required>
              <option value="">Select level...</option>
              <option value="High">High – outage or compromise severely impacts the business</option>
              <option value="Medium">Medium – important but tolerable short outage</option>
              <option value="Low">Low – limited impact if unavailable</option>
            </select>
          </div>

          <div class="form-group">
            <label class="text-muted small mb-1 d-block">Data types (optional)</label>
            <div class="d-flex flex-wrap">
              <div class="custom-control custom-checkbox mr-3 mb-1">
                <input type="checkbox" class="custom-control-input asset-datatype" id="dt-phi" value="PHI">
                <label class="custom-control-label" for="dt-phi">PHI</label>
              </div>
              <div class="custom-control custom-checkbox mr-3 mb-1">
                <input type="checkbox" class="custom-control-input asset-datatype" id="dt-pii" value="PII">
                <label class="custom-control-label" for="dt-pii">PII</label>
              </div>
              <div class="custom-control custom-checkbox mr-3 mb-1">
                <input type="checkbox" class="custom-control-input asset-datatype" id="dt-pan" value="Card data">
                <label class="custom-control-label" for="dt-pan">Card data</label>
              </div>
              <div class="custom-control custom-checkbox mr-3 mb-1">
                <input type="checkbox" class="custom-control-input asset-datatype" id="dt-int" value="Internal data">
                <label class="custom-control-label" for="dt-int">Internal data</label>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="asset-owner" class="text-muted small mb-1">Owner (team or role)</label>
            <input type="text" id="asset-owner" class="form-control form-control-sm"
                   placeholder="e.g. DevOps Team / CTO">
          </div>

          <div class="form-group">
            <label for="asset-notes" class="text-muted small mb-1">Notes (optional)</label>
            <textarea id="asset-notes" class="form-control form-control-sm" rows="2"
                      placeholder="Scope, integrations, region, etc."></textarea>
          </div>

          <div class="d-flex justify-content-between align-items-center">
            <button type="submit" id="asset-form-submit" class="btn btn-primary btn-sm">
              Save asset
            </button>
            <button type="button" id="asset-form-cancel" class="btn btn-outline-light btn-sm">
              Clear form
            </button>
          </div>

          <small class="text-muted d-block mt-2">
            Assets are stored locally in your browser (no data is sent to any server).
          </small>
        </form>
      </div>
    </div>

    <!-- Table column -->
    <div class="col-md-7 mb-4">
      <div class="bg-dark p-3 rounded">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h5 class="mb-0">Assets</h5>
          <small id="assets-count" class="text-muted"></small>
        </div>

        <div class="table-responsive">
          <table class="table table-dark table-striped table-hover table-sm mb-0">
            <thead>
              <tr>
                <th style="width: 22%;">Name</th>
                <th style="width: 16%;">Type</th>
                <th style="width: 14%;">Criticality</th>
                <th style="width: 20%;">Data types</th>
                <th style="width: 16%;">Owner</th>
                <th style="width: 12%;">Actions</th>
              </tr>
            </thead>
            <tbody id="assets-table-body">
              <!-- rows injected by JS -->
            </tbody>
          </table>
        </div>

        <div id="assets-empty-state" class="text-muted small mt-2">
          No assets yet. Add your first asset using the form on the left.
        </div>
      </div>
    </div>
  </div>
</div>
        <!-- Tab: Risks -->
        <div id="tab-risks" class="grc-tab ftco-animate">
          <h3>Risk Register</h3>
          <p class="mb-3">
            This section will hold likelihood/impact scoring, risk ownership, and mapping to controls.
          </p>
          <div class="bg-dark p-4 rounded">
            <p class="mb-0 text-muted">
              Next steps: risk form, scoring logic (L × I), and filters.
            </p>
          </div>
        </div>

      </div>
    </section>

    <footer class="ftco-footer ftco-section">
      <div class="container">
        <div class="row">
          <div class="col-md-12 text-center">
            <p>
              Copyright &copy;<script>document.write(new Date().getFullYear());</script>
              All rights reserved
            </p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Scripts (same as index) -->
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-migrate-3.0.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.stellar.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/jquery.animateNumber.min.js"></script>
    <script src="js/scrollax.min.js"></script>
    <script src="js/main.js"></script>

     <!-- Tab switcher + Framework Library logic -->
    <script>
      // --- Unified, paraphrased control set ---
      const FRAMEWORK_CONTROLS = [
        {
          id: "CTRL-AC-01",
          name: "Manage user accounts",
          category: "Access Control",
          description: "Only approved users receive accounts, and access is removed quickly when people change roles or leave.",
          frameworks: ["ISO 27001", "NIST CSF"],
          references: ["ISO 27001 A.9", "NIST PR.AC-1"]
        },
        {
          id: "CTRL-AC-02",
          name: "Limit privileged access",
          category: "Identity & Authentication",
          description: "Privileged roles are tightly controlled, logged, and reviewed on a regular schedule.",
          frameworks: ["ISO 27001", "NIST CSF", "PCI DSS"],
          references: ["ISO 27001 A.9.2", "NIST PR.AC-4", "PCI DSS 7"]
        },
        {
          id: "CTRL-AC-03",
          name: "Strong authentication",
          category: "Identity & Authentication",
          description: "Multi-factor authentication is used for admin accounts and remote access to critical systems.",
          frameworks: ["ISO 27001", "NIST CSF", "PCI DSS", "HIPAA"],
          references: ["ISO 27001 A.9.4", "NIST PR.AC-7", "PCI DSS 8", "HIPAA 164.312(d)"]
        },
        {
          id: "CTRL-LOG-01",
          name: "Central activity logging",
          category: "Logging & Monitoring",
          description: "Security-relevant events from key systems are collected in a central logging solution.",
          frameworks: ["ISO 27001", "NIST CSF", "PCI DSS"],
          references: ["ISO 27001 A.12.4", "NIST DE.AE-1", "PCI DSS 10"]
        },
        {
          id: "CTRL-LOG-02",
          name: "Regular log review",
          category: "Logging & Monitoring",
          description: "Logs for important systems are reviewed, with suspicious events investigated and documented.",
          frameworks: ["ISO 27001", "NIST CSF", "HIPAA"],
          references: ["ISO 27001 A.12.4", "NIST DE.CM-1", "HIPAA 164.308(a)(1)"]
        },
        {
          id: "CTRL-ENC-01",
          name: "Encrypt data at rest",
          category: "Encryption & Key Management",
          description: "Sensitive data stored in databases, file systems, and backups is encrypted.",
          frameworks: ["ISO 27001", "PCI DSS", "HIPAA"],
          references: ["ISO 27001 A.10", "PCI DSS 3", "HIPAA 164.312(a)(2)(iv)"]
        },
        {
          id: "CTRL-ENC-02",
          name: "Encrypt data in transit",
          category: "Encryption & Key Management",
          description: "Connections carrying sensitive data use secure protocols such as TLS, with weak ciphers disabled.",
          frameworks: ["ISO 27001", "NIST CSF", "PCI DSS", "HIPAA"],
          references: ["ISO 27001 A.13", "NIST PR.DS-2", "PCI DSS 4", "HIPAA 164.312(e)(1)"]
        },
        {
          id: "CTRL-BCP-01",
          name: "Backups & restore testing",
          category: "Backup & Recovery",
          description: "Critical systems and data are backed up regularly and restore tests are performed and documented.",
          frameworks: ["ISO 27001", "NIST CSF"],
          references: ["ISO 27001 A.12.3", "NIST PR.IP-4"]
        },
        {
          id: "CTRL-CHG-01",
          name: "Controlled changes",
          category: "Change Management",
          description: "Changes to production systems follow an approved process with impact assessment and rollback plans.",
          frameworks: ["ISO 27001", "NIST CSF"],
          references: ["ISO 27001 A.12.1", "NIST PR.IP-3"]
        },
        {
          id: "CTRL-CHG-02",
          name: "Separate environments",
          category: "Change Management",
          description: "Development and testing environments are separated from production, with restricted access between them.",
          frameworks: ["ISO 27001", "PCI DSS"],
          references: ["ISO 27001 A.12.1.4", "PCI DSS 6.4"]
        },
        {
          id: "CTRL-VULN-01",
          name: "Vulnerability management",
          category: "Vulnerability Management",
          description: "Systems are regularly scanned for vulnerabilities and patches are applied according to defined timelines.",
          frameworks: ["ISO 27001", "NIST CSF", "PCI DSS"],
          references: ["ISO 27001 A.12.6", "NIST DE.CM-8", "PCI DSS 11"]
        },
        {
          id: "CTRL-IR-01",
          name: "Incident response plan",
          category: "Incident Response",
          description: "There is a documented incident response plan with clear roles, steps, and communication paths.",
          frameworks: ["ISO 27001", "NIST CSF", "HIPAA"],
          references: ["ISO 27001 A.16", "NIST RS.RP-1", "HIPAA 164.308(a)(6)"]
        },
        {
          id: "CTRL-IR-02",
          name: "Detect and triage events",
          category: "Incident Response",
          description: "Security events are detected, triaged, classified, and escalated according to defined procedures.",
          frameworks: ["ISO 27001", "NIST CSF"],
          references: ["ISO 27001 A.16", "NIST DE.CM-1"]
        },
        {
          id: "CTRL-VND-01",
          name: "Vendor due diligence",
          category: "Vendor Risk",
          description: "Third-party service providers are assessed for security and privacy risks before onboarding and periodically thereafter.",
          frameworks: ["ISO 27001", "NIST CSF"],
          references: ["ISO 27001 A.15", "NIST ID.SC-1"]
        },
        {
          id: "CTRL-VND-02",
          name: "Data protection in contracts",
          category: "Vendor Risk",
          description: "Contracts with vendors include requirements for protecting data, breach notification, and right to audit.",
          frameworks: ["ISO 27001", "HIPAA"],
          references: ["ISO 27001 A.15.1.2", "HIPAA 164.308(b)"]
        },
        {
          id: "CTRL-POL-01",
          name: "Information security policy",
          category: "Policy & Governance",
          description: "Management-approved information security policies define expectations, roles, and responsibilities.",
          frameworks: ["ISO 27001", "NIST CSF"],
          references: ["ISO 27001 A.5", "NIST ID.GV-1"]
        },
        {
          id: "CTRL-AW-01",
          name: "Security awareness training",
          category: "Awareness & Training",
          description: "Employees receive regular training on security, privacy, phishing, and how to report incidents.",
          frameworks: ["ISO 27001", "NIST CSF", "HIPAA"],
          references: ["ISO 27001 A.7.2.2", "NIST PR.AT-1", "HIPAA 164.308(a)(5)"]
        }
      ];

      function renderFrameworkControls() {
        const tbody = document.getElementById('frameworks-table-body');
        const countEl = document.getElementById('frameworks-count');
        const frameworkFilter = document.getElementById('framework-filter');
        const categoryFilter = document.getElementById('category-filter');
        const searchInput = document.getElementById('framework-search');

        if (!tbody || !frameworkFilter || !categoryFilter || !searchInput) return;

        const frameworkValue = frameworkFilter.value;
        const categoryValue = categoryFilter.value;
        const searchValue = searchInput.value.trim().toLowerCase();

        const filtered = FRAMEWORK_CONTROLS.filter(ctrl => {
          const matchesFramework =
            frameworkValue === 'all' || ctrl.frameworks.includes(frameworkValue);
          const matchesCategory =
            categoryValue === 'all' || ctrl.category === categoryValue;
          const matchesSearch =
            !searchValue ||
            ctrl.name.toLowerCase().includes(searchValue) ||
            ctrl.description.toLowerCase().includes(searchValue) ||
            ctrl.id.toLowerCase().includes(searchValue);

          return matchesFramework && matchesCategory && matchesSearch;
        });

        tbody.innerHTML = '';
        filtered.forEach(ctrl => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${ctrl.id}</td>
            <td>${ctrl.name}</td>
            <td>${ctrl.category}</td>
            <td>${ctrl.references.join('<br>')}</td>
            <td>${ctrl.description}</td>
          `;
          tbody.appendChild(tr);
        });

        if (countEl) {
          countEl.textContent = `${filtered.length} control(s) shown out of ${FRAMEWORK_CONTROLS.length}`;
        }
      }

      document.addEventListener('DOMContentLoaded', function () {
        // Tab logic
        const buttons = document.querySelectorAll('[data-grc-tab]');
        const tabs = {
          frameworks: document.getElementById('tab-frameworks'),
          assets: document.getElementById('tab-assets'),
          risks: document.getElementById('tab-risks')
        };

        buttons.forEach(btn => {
          btn.addEventListener('click', () => {
            const target = btn.getAttribute('data-grc-tab');

            // button styling
            buttons.forEach(b => b.classList.remove('btn-primary'));
            buttons.forEach(b => b.classList.add('btn-outline-light'));
            btn.classList.remove('btn-outline-light');
            btn.classList.add('btn-primary');

            // tab visibility
            Object.values(tabs).forEach(t => t.classList.remove('active'));
            tabs[target].classList.add('active');
          });
        });

        // Framework Library filters
        const frameworkFilter = document.getElementById('framework-filter');
        const categoryFilter = document.getElementById('category-filter');
        const searchInput = document.getElementById('framework-search');

        if (frameworkFilter && categoryFilter && searchInput) {
          frameworkFilter.addEventListener('change', renderFrameworkControls);
          categoryFilter.addEventListener('change', renderFrameworkControls);
          searchInput.addEventListener('input', renderFrameworkControls);
        }

        // Initial render
        renderFrameworkControls();
      });
    </script>
  </body>
</html>
